<!DOCTYPE html>
<html lang="pt-BR">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Afrika Crawler - Monitor de atualizações de ferramentas de segurança">
    <meta name="theme-color" content="#6366f1">

    <title>Afrika Crawler - Security Updates Monitor</title>

    <!-- Preconnect to external resources -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link rel="preconnect" href="https://cdn.jsdelivr.net">

    <!-- Fonts -->
    <link
        href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&family=JetBrains+Mono:wght@400;500&display=swap"
        rel="stylesheet">

    <!-- External Libraries -->
    <!-- FullCalendar -->
    <link href="https://cdn.jsdelivr.net/npm/fullcalendar@6.1.10/index.global.min.css" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/fullcalendar@6.1.10/index.global.min.js"></script>

    <!-- Chart.js -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.1/dist/chart.umd.min.js"></script>

    <!-- Lucide Icons -->
    <script src="https://unpkg.com/lucide@latest/dist/umd/lucide.min.js"></script>

    <!-- Tippy.js -->
    <script src="https://unpkg.com/@popperjs/core@2"></script>
    <script src="https://unpkg.com/tippy.js@6"></script>
    <link rel="stylesheet" href="https://unpkg.com/tippy.js@6/animations/shift-away.css">

    <!-- AOS - Animate on Scroll -->
    <link href="https://unpkg.com/aos@2.3.1/dist/aos.css" rel="stylesheet">
    <script src="https://unpkg.com/aos@2.3.1/dist/aos.js"></script>

    <!-- Modular CSS -->
    <link rel="stylesheet" href="css/variables.css">
    <link rel="stylesheet" href="css/base.css">
    <link rel="stylesheet" href="css/components.css">
    <link rel="stylesheet" href="css/layout.css">
    <link rel="stylesheet" href="css/views.css">
    <link rel="stylesheet" href="css/api-docs.css">
</head>

<body>
    <!-- ===== Header ===== -->
    <header class="header">
        <div class="header-content">
            <div class="logo" data-aos="fade-right">
                <div class="logo-icon">
                    <i data-lucide="shield-check" style="width: 24px; height: 24px;"></i>
                </div>
                <div class="logo-text">
                    <h1>Afrika Crawler</h1>
                    <span>Security Updates Monitor</span>
                </div>
            </div>

            <div class="header-actions" data-aos="fade-left">
                <button class="btn btn-ghost" data-theme-toggle aria-label="Alternar tema">
                    <i data-lucide="moon" style="width: 18px; height: 18px;"></i>
                </button>
                <button class="btn" onclick="App.openExportModal()">
                    <i data-lucide="download" style="width: 16px; height: 16px;"></i>
                    <span>Exportar</span>
                </button>
                <button class="btn btn-primary" onclick="App.refreshData()">
                    <i data-lucide="refresh-cw" style="width: 16px; height: 16px;"></i>
                    <span>Atualizar</span>
                </button>
                <div class="header-divider"></div>
                <a href="api-docs.html" class="btn" title="Documentação da API">
                    <span>API Docs</span>
                    <i data-lucide="arrow-right" style="width: 16px; height: 16px;"></i>
                </a>
            </div>
        </div>
    </header>

    <!-- ===== Main Content ===== -->
    <main class="main-content">
        <!-- Stats Bar -->
        <section class="stats-bar" data-aos="fade-up" data-aos-delay="100">
            <div class="stat-card">
                <div class="stat-icon blue">
                    <i data-lucide="package" style="width: 24px; height: 24px;"></i>
                </div>
                <div class="stat-info">
                    <span class="stat-value" id="statTotal">-</span>
                    <span class="stat-label">Total de Updates</span>
                </div>
            </div>
            <div class="stat-card">
                <div class="stat-icon green">
                    <i data-lucide="layers" style="width: 24px; height: 24px;"></i>
                </div>
                <div class="stat-info">
                    <span class="stat-value" id="statTools">-</span>
                    <span class="stat-label">Ferramentas</span>
                </div>
            </div>
            <div class="stat-card">
                <div class="stat-icon purple">
                    <i data-lucide="calendar" style="width: 24px; height: 24px;"></i>
                </div>
                <div class="stat-info">
                    <span class="stat-value" id="statRecent">-</span>
                    <span class="stat-label">Updates este mês</span>
                </div>
            </div>
            <div class="stat-card">
                <div class="stat-icon orange">
                    <i data-lucide="clock" style="width: 24px; height: 24px;"></i>
                </div>
                <div class="stat-info">
                    <span class="stat-value" id="statDays">-</span>
                    <span class="stat-label">Dias desde último</span>
                </div>
            </div>
        </section>

        <!-- Toolbar -->
        <section class="toolbar" data-aos="fade-up" data-aos-delay="200">
            <div class="toolbar-row">
                <div class="search-box">
                    <i data-lucide="search" class="search-icon" style="width: 18px; height: 18px;"></i>
                    <input type="search" id="searchInput" class="input input-icon-left"
                        placeholder="Buscar por versão, ferramenta ou descrição..." aria-label="Buscar updates">
                </div>
                <div class="filter-group">
                    <label for="toolFilter">Ferramenta:</label>
                    <select id="toolFilter" class="select">
                        <option value="">Todas</option>
                    </select>
                </div>
                <div class="filter-group">
                    <label for="dateFilter">Período:</label>
                    <select id="dateFilter" class="select">
                        <option value="">Todo período</option>
                        <option value="7">Últimos 7 dias</option>
                        <option value="30">Últimos 30 dias</option>
                        <option value="90">Últimos 90 dias</option>
                        <option value="365">Último ano</option>
                    </select>
                </div>
            </div>
            <div class="toolbar-row">
                <div class="filter-group">
                    <label for="sortField">Ordenar:</label>
                    <select id="sortField" class="select">
                        <option value="date">Data</option>
                        <option value="tool">Ferramenta</option>
                        <option value="version">Versão</option>
                    </select>
                </div>
                <div class="filter-group">
                    <label for="sortOrder">Ordem:</label>
                    <select id="sortOrder" class="select">
                        <option value="desc">Mais recentes</option>
                        <option value="asc">Mais antigos</option>
                    </select>
                </div>
                <div class="filter-group">
                    <label for="perPage">Por página:</label>
                    <select id="perPage" class="select">
                        <option value="12">12</option>
                        <option value="24" selected>24</option>
                        <option value="48">48</option>
                        <option value="96">96</option>
                    </select>
                </div>
                <div style="flex: 1;"></div>
                <div class="view-toggle" role="tablist" aria-label="Tipo de visualização">
                    <button class="view-btn active" data-view="cards" role="tab" aria-selected="true"
                        title="Visualização em Cards">
                        <i data-lucide="layout-grid" style="width: 16px; height: 16px;"></i>
                        <span>Cards</span>
                    </button>
                    <button class="view-btn" data-view="table" role="tab" aria-selected="false"
                        title="Visualização em Tabela">
                        <i data-lucide="table" style="width: 16px; height: 16px;"></i>
                        <span>Tabela</span>
                    </button>
                    <button class="view-btn" data-view="timeline" role="tab" aria-selected="false"
                        title="Visualização em Timeline">
                        <i data-lucide="git-commit" style="width: 16px; height: 16px;"></i>
                        <span>Timeline</span>
                    </button>
                    <button class="view-btn" data-view="calendar" role="tab" aria-selected="false"
                        title="Visualização em Calendário">
                        <i data-lucide="calendar-days" style="width: 16px; height: 16px;"></i>
                        <span>Calendário</span>
                    </button>
                    <button class="view-btn" data-view="charts" role="tab" aria-selected="false"
                        title="Visualização em Gráficos">
                        <i data-lucide="bar-chart-3" style="width: 16px; height: 16px;"></i>
                        <span>Analytics</span>
                    </button>
                </div>
            </div>
        </section>

        <!-- Error Banner -->
        <div class="error-banner" id="errorBanner" role="alert">
            <i data-lucide="alert-circle" style="width: 20px; height: 20px;"></i>
            <span id="errorMessage"></span>
            <button class="btn btn-sm btn-ghost" onclick="App.hideError()" aria-label="Fechar">
                <i data-lucide="x" style="width: 16px; height: 16px;"></i>
            </button>
        </div>

        <!-- Content Views -->
        <div id="cardsView" class="content-view active" role="tabpanel">
            <div class="updates-grid" id="updatesGrid"></div>
        </div>

        <div id="tableView" class="content-view" role="tabpanel">
            <div class="table-container">
                <div class="table-wrapper">
                    <table class="data-table">
                        <thead>
                            <tr>
                                <th onclick="App.handleSort && App.handleSort('tool')" onkeydown="if(event.key==='Enter'||event.key===' ')App.handleSort&&App.handleSort('tool')" tabindex="0">
                                    Ferramenta
                                    <span class="sort-icon-container">
                                        <i data-lucide="arrow-up-down" class="sort-icon sort-icon-default"
                                            style="width: 14px; height: 14px;"></i>
                                        <i data-lucide="arrow-up" class="sort-icon sort-icon-asc"
                                            style="width: 14px; height: 14px;"></i>
                                        <i data-lucide="arrow-down" class="sort-icon sort-icon-desc"
                                            style="width: 14px; height: 14px;"></i>
                                    </span>
                                </th>
                                <th onclick="App.handleSort && App.handleSort('version')" onkeydown="if(event.key==='Enter'||event.key===' ')App.handleSort&&App.handleSort('version')" tabindex="0">
                                    Versão
                                    <span class="sort-icon-container">
                                        <i data-lucide="arrow-up-down" class="sort-icon sort-icon-default"
                                            style="width: 14px; height: 14px;"></i>
                                        <i data-lucide="arrow-up" class="sort-icon sort-icon-asc"
                                            style="width: 14px; height: 14px;"></i>
                                        <i data-lucide="arrow-down" class="sort-icon sort-icon-desc"
                                            style="width: 14px; height: 14px;"></i>
                                    </span>
                                </th>
                                <th onclick="App.handleSort && App.handleSort('date')" onkeydown="if(event.key==='Enter'||event.key===' ')App.handleSort&&App.handleSort('date')" tabindex="0">
                                    Data
                                    <span class="sort-icon-container">
                                        <i data-lucide="arrow-up-down" class="sort-icon sort-icon-default"
                                            style="width: 14px; height: 14px;"></i>
                                        <i data-lucide="arrow-up" class="sort-icon sort-icon-asc"
                                            style="width: 14px; height: 14px;"></i>
                                        <i data-lucide="arrow-down" class="sort-icon sort-icon-desc"
                                            style="width: 14px; height: 14px;"></i>
                                    </span>
                                </th>
                                <th>Descrição</th>
                                <th>Ações</th>
                            </tr>
                        </thead>
                        <tbody id="tableBody"></tbody>
                    </table>
                </div>
            </div>
        </div>

        <div id="timelineView" class="content-view" role="tabpanel">
            <div class="timeline-container">
                <div class="timeline" id="timeline"></div>
            </div>
        </div>

        <div id="calendarView" class="content-view" role="tabpanel">
            <div class="calendar-container">
                <div id="calendar"></div>
            </div>
        </div>

        <div id="chartsView" class="content-view" role="tabpanel">
            <div class="charts-container">
                <div class="chart-card" data-aos="fade-up">
                    <div class="chart-header">
                        <h3 class="chart-title">
                            <i data-lucide="trending-up"
                                style="width: 20px; height: 20px; color: var(--color-primary);"></i>
                            Updates ao Longo do Tempo
                        </h3>
                    </div>
                    <div class="chart-wrapper">
                        <canvas id="timelineChart"></canvas>
                    </div>
                </div>
                <div class="chart-card" data-aos="fade-up" data-aos-delay="100">
                    <div class="chart-header">
                        <h3 class="chart-title">
                            <i data-lucide="pie-chart"
                                style="width: 20px; height: 20px; color: var(--color-primary);"></i>
                            Distribuição por Ferramenta
                        </h3>
                    </div>
                    <div class="chart-wrapper">
                        <canvas id="toolsChart"></canvas>
                    </div>
                </div>
                <div class="chart-card" data-aos="fade-up" data-aos-delay="200">
                    <div class="chart-header">
                        <h3 class="chart-title">
                            <i data-lucide="activity"
                                style="width: 20px; height: 20px; color: var(--color-primary);"></i>
                            Atividade por Dia da Semana
                        </h3>
                    </div>
                    <div class="chart-wrapper">
                        <canvas id="activityChart"></canvas>
                    </div>
                </div>
            </div>
        </div>

        <!-- Pagination -->
        <nav class="pagination-container" id="paginationContainer" aria-label="Paginação">
            <div class="pagination-info" id="paginationInfo"></div>
            <nav class="pagination" id="pagination" aria-label="Páginas"></nav>
        </nav>
    </main>

    <!-- ===== Footer ===== -->
    <footer style="text-align: center; padding: 2rem; color: var(--text-muted); font-size: 0.875rem;">
        <p>
            <i data-lucide="shield-check" style="width: 16px; height: 16px; vertical-align: middle;"></i>
            Afrika Crawler &copy; 2026 — Monitorando updates de segurança
        </p>
    </footer>

    <!-- ===== Loading Overlay ===== -->
    <div class="loading-overlay" id="loadingOverlay" aria-hidden="true">
        <div class="loading-spinner">
            <div class="spinner-dots">
                <span></span>
                <span></span>
                <span></span>
            </div>
            <span style="color: var(--text-secondary); font-size: 0.9375rem; font-weight: 500;">
                Carregando updates...
            </span>
        </div>
    </div>

    <!-- ===== Detail Modal ===== -->
    <dialog class="modal-overlay" id="detailModal" aria-labelledby="modalTitle">
        <div class="modal">
            <div class="modal-header">
                <h2 class="modal-title" id="modalTitle">
                    <i data-lucide="info" style="width: 20px; height: 20px; color: var(--color-primary);"></i>
                    Detalhes do Update
                </h2>
                <button class="modal-close" onclick="App.closeModal()" aria-label="Fechar modal">
                    <i data-lucide="x" style="width: 20px; height: 20px;"></i>
                </button>
            </div>
            <div class="modal-body" id="modalBody"></div>
        </div>
    </dialog>

    <!-- ===== Export Configuration Modal ===== -->
    <dialog class="modal-overlay" id="exportModal" aria-labelledby="exportModalTitle">
        <div class="modal">
            <div class="modal-header">
                <h2 class="modal-title" id="exportModalTitle">
                    <i data-lucide="settings" style="width: 20px; height: 20px; color: var(--color-primary);"></i>
                    Configurar Exportação
                </h2>
                <button class="modal-close" onclick="App.closeExportModal()" aria-label="Fechar modal">
                    <i data-lucide="x" style="width: 20px; height: 20px;"></i>
                </button>
            </div>
            <div class="modal-body">
                <div style="display: flex; flex-direction: column; gap: 20px;">
                    <!-- Format Selection -->
                    <div>
                        <div style="display: block; font-weight: 600; margin-bottom: 12px; color: var(--text-primary);">
                            Formato de Exportação
                        </div>
                        <div style="display: flex; gap: 12px;">
                            <label style="display: flex; align-items: center; gap: 8px; cursor: pointer; flex: 1;">
                                <input type="radio" name="exportFormat" value="csv" checked style="cursor: pointer;">
                                <span>CSV</span>
                            </label>
                            <label style="display: flex; align-items: center; gap: 8px; cursor: pointer; flex: 1;">
                                <input type="radio" name="exportFormat" value="json" style="cursor: pointer;">
                                <span>JSON</span>
                            </label>
                        </div>
                    </div>

                    <!-- Fields Selection -->
                    <div>
                        <div style="display: block; font-weight: 600; margin-bottom: 12px; color: var(--text-primary);">
                            Campos a Incluir
                        </div>
                        <div style="display: flex; flex-direction: column; gap: 8px;">
                            <label style="display: flex; align-items: center; gap: 8px; cursor: pointer;">
                                <input type="checkbox" name="exportField" value="tool" checked style="cursor: pointer;">
                                <span>Ferramenta</span>
                            </label>
                            <label style="display: flex; align-items: center; gap: 8px; cursor: pointer;">
                                <input type="checkbox" name="exportField" value="version" checked style="cursor: pointer;">
                                <span>Versão</span>
                            </label>
                            <label style="display: flex; align-items: center; gap: 8px; cursor: pointer;">
                                <input type="checkbox" name="exportField" value="date" checked style="cursor: pointer;">
                                <span>Data</span>
                            </label>
                            <label style="display: flex; align-items: center; gap: 8px; cursor: pointer;">
                                <input type="checkbox" name="exportField" value="description" style="cursor: pointer;">
                                <span>Descrição</span>
                            </label>
                            <label style="display: flex; align-items: center; gap: 8px; cursor: pointer;">
                                <input type="checkbox" name="exportField" value="link" style="cursor: pointer;">
                                <span>Link</span>
                            </label>
                        </div>
                    </div>

                    <!-- Action Buttons -->
                    <div style="display: flex; gap: 12px; margin-top: 8px;">
                        <button class="btn btn-ghost" onclick="App.closeExportModal()" style="flex: 1;">
                            Cancelar
                        </button>
                        <button class="btn btn-primary" onclick="App.performExport()" style="flex: 1;">
                            <i data-lucide="download" style="width: 16px; height: 16px;"></i>
                            <span>Exportar</span>
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- ===== Toast Container ===== -->
    <div class="toast-container" aria-live="polite"></div>

    <!-- ===== Scripts ===== -->
    <script src="js/utils.js"></script>
    <script src="js/toast.js"></script>
    <script src="js/theme.js"></script>
    <script src="js/components.js"></script>
    <script src="js/charts.js"></script>
    <script src="js/app.js"></script>

    <!-- Initialize AOS -->
    <script>
        AOS.init({
            duration: 600,
            easing: 'ease-out-cubic',
            once: true,
            offset: 50
        });
    </script>
</body>

</html>