<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Afrika Crawler - Monitor de atualiza√ß√µes de ferramentas de seguran√ßa">
    <meta name="theme-color" content="#6366f1">
    
    <title>Afrika Crawler - Security Updates Monitor</title>
    
    <!-- Preconnect to external resources -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link rel="preconnect" href="https://cdn.jsdelivr.net">
    
    <!-- Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&family=JetBrains+Mono:wght@400;500&display=swap" rel="stylesheet">
    
    <!-- External Libraries -->
    <!-- FullCalendar -->
    <link href="https://cdn.jsdelivr.net/npm/fullcalendar@6.1.10/index.global.min.css" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/fullcalendar@6.1.10/index.global.min.js"></script>
    
    <!-- Chart.js -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.1/dist/chart.umd.min.js"></script>
    
    <!-- Lucide Icons -->
    <script src="https://unpkg.com/lucide@latest/dist/umd/lucide.min.js"></script>
    
    <!-- Tippy.js -->
    <script src="https://unpkg.com/@popperjs/core@2"></script>
    <script src="https://unpkg.com/tippy.js@6"></script>
    <link rel="stylesheet" href="https://unpkg.com/tippy.js@6/animations/shift-away.css">
    
    <!-- AOS - Animate on Scroll -->
    <link href="https://unpkg.com/aos@2.3.1/dist/aos.css" rel="stylesheet">
    <script src="https://unpkg.com/aos@2.3.1/dist/aos.js"></script>
    
    <!-- Modular CSS -->
    <link rel="stylesheet" href="css/variables.css">
    <link rel="stylesheet" href="css/base.css">
    <link rel="stylesheet" href="css/components.css">
    <link rel="stylesheet" href="css/layout.css">
    <link rel="stylesheet" href="css/views.css">
    <link rel="stylesheet" href="css/api-docs.css">
</head>
<body>
    <!-- ===== Header ===== -->
    <header class="header">
        <div class="header-content">
            <div class="logo" data-aos="fade-right">
                <div class="logo-icon">
                    <i data-lucide="shield-check" style="width: 24px; height: 24px;"></i>
                </div>
                <div class="logo-text">
                    <h1>Afrika Crawler</h1>
                    <span>Security Updates Monitor</span>
                </div>
            </div>
            
            <div class="header-actions" data-aos="fade-left">
                <button class="btn btn-ghost" data-theme-toggle aria-label="Alternar tema">
                    <i data-lucide="moon" style="width: 18px; height: 18px;"></i>
                </button>
                <button class="btn" onclick="App.exportData('csv')">
                    <i data-lucide="download" style="width: 16px; height: 16px;"></i>
                    <span>Exportar</span>
                </button>
                <button class="btn btn-primary" onclick="App.refreshData()">
                    <i data-lucide="refresh-cw" style="width: 16px; height: 16px;"></i>
                    <span>Atualizar</span>
                </button>
            </div>
        </div>
    </header>

    <!-- ===== Main Content ===== -->
    <main class="main-content">
        <!-- Stats Bar -->
        <section class="stats-bar" data-aos="fade-up" data-aos-delay="100">
            <div class="stat-card">
                <div class="stat-icon blue">
                    <i data-lucide="package" style="width: 24px; height: 24px;"></i>
                </div>
                <div class="stat-info">
                    <span class="stat-value" id="statTotal">-</span>
                    <span class="stat-label">Total de Updates</span>
                </div>
            </div>
            <div class="stat-card">
                <div class="stat-icon green">
                    <i data-lucide="layers" style="width: 24px; height: 24px;"></i>
                </div>
                <div class="stat-info">
                    <span class="stat-value" id="statTools">-</span>
                    <span class="stat-label">Ferramentas</span>
                </div>
            </div>
            <div class="stat-card">
                <div class="stat-icon purple">
                    <i data-lucide="calendar" style="width: 24px; height: 24px;"></i>
                </div>
                <div class="stat-info">
                    <span class="stat-value" id="statRecent">-</span>
                    <span class="stat-label">Updates este m√™s</span>
                </div>
            </div>
            <div class="stat-card">
                <div class="stat-icon orange">
                    <i data-lucide="clock" style="width: 24px; height: 24px;"></i>
                </div>
                <div class="stat-info">
                    <span class="stat-value" id="statDays">-</span>
                    <span class="stat-label">Dias desde √∫ltimo</span>
                </div>
            </div>
        </section>

        <!-- Toolbar -->
        <section class="toolbar" data-aos="fade-up" data-aos-delay="200">
            <div class="toolbar-row">
                <div class="search-box">
                    <i data-lucide="search" class="search-icon" style="width: 18px; height: 18px;"></i>
                    <input 
                        type="search" 
                        id="searchInput" 
                        class="input input-icon-left" 
                        placeholder="Buscar por vers√£o, ferramenta ou descri√ß√£o..."
                        aria-label="Buscar updates"
                    >
                </div>
                <div class="filter-group">
                    <label for="toolFilter">Ferramenta:</label>
                    <select id="toolFilter" class="select">
                        <option value="">Todas</option>
                    </select>
                </div>
                <div class="filter-group">
                    <label for="dateFilter">Per√≠odo:</label>
                    <select id="dateFilter" class="select">
                        <option value="">Todo per√≠odo</option>
                        <option value="7">√öltimos 7 dias</option>
                        <option value="30">√öltimos 30 dias</option>
                        <option value="90">√öltimos 90 dias</option>
                        <option value="365">√öltimo ano</option>
                    </select>
                </div>
            </div>
            <div class="toolbar-row">
                <div class="filter-group">
                    <label for="sortField">Ordenar:</label>
                    <select id="sortField" class="select">
                        <option value="date">Data</option>
                        <option value="tool">Ferramenta</option>
                        <option value="version">Vers√£o</option>
                    </select>
                </div>
                <div class="filter-group">
                    <label for="sortOrder">Ordem:</label>
                    <select id="sortOrder" class="select">
                        <option value="desc">Mais recentes</option>
                        <option value="asc">Mais antigos</option>
                    </select>
                </div>
                <div class="filter-group">
                    <label for="perPage">Por p√°gina:</label>
                    <select id="perPage" class="select">
                        <option value="12">12</option>
                        <option value="24" selected>24</option>
                        <option value="48">48</option>
                        <option value="96">96</option>
                    </select>
                </div>
                <div style="flex: 1;"></div>
                <div class="view-toggle" role="tablist" aria-label="Tipo de visualiza√ß√£o">
                    <button class="view-btn active" data-view="cards" role="tab" aria-selected="true" title="Visualiza√ß√£o em Cards">
                        <i data-lucide="layout-grid" style="width: 16px; height: 16px;"></i>
                        <span>Cards</span>
                    </button>
                    <button class="view-btn" data-view="table" role="tab" aria-selected="false" title="Visualiza√ß√£o em Tabela">
                        <i data-lucide="table" style="width: 16px; height: 16px;"></i>
                        <span>Tabela</span>
                    </button>
                    <button class="view-btn" data-view="timeline" role="tab" aria-selected="false" title="Visualiza√ß√£o em Timeline">
                        <i data-lucide="git-commit" style="width: 16px; height: 16px;"></i>
                        <span>Timeline</span>
                    </button>
                    <button class="view-btn" data-view="calendar" role="tab" aria-selected="false" title="Visualiza√ß√£o em Calend√°rio">
                        <i data-lucide="calendar-days" style="width: 16px; height: 16px;"></i>
                        <span>Calend√°rio</span>
                    </button>
                    <button class="view-btn" data-view="charts" role="tab" aria-selected="false" title="Visualiza√ß√£o em Gr√°ficos">
                        <i data-lucide="bar-chart-3" style="width: 16px; height: 16px;"></i>
                        <span>Analytics</span>
                    </button>
                </div>
            </div>
        </section>

        <!-- Error Banner -->
        <div class="error-banner" id="errorBanner" role="alert">
            <i data-lucide="alert-circle" style="width: 20px; height: 20px;"></i>
            <span id="errorMessage"></span>
            <button class="btn btn-sm btn-ghost" onclick="App.hideError()" aria-label="Fechar">
                <i data-lucide="x" style="width: 16px; height: 16px;"></i>
            </button>
        </div>

        <!-- Content Views -->
        <div id="cardsView" class="content-view active" role="tabpanel">
            <div class="updates-grid" id="updatesGrid"></div>
        </div>

        <div id="tableView" class="content-view" role="tabpanel">
            <div class="table-container">
                <div class="table-wrapper">
                    <table class="data-table">
                        <thead>
                            <tr>
                                <th onclick="App.handleSort && App.handleSort('tool')">
                                    Ferramenta
                                    <i data-lucide="arrow-up-down" class="sort-icon" style="width: 14px; height: 14px;"></i>
                                </th>
                                <th onclick="App.handleSort && App.handleSort('version')">
                                    Vers√£o
                                    <i data-lucide="arrow-up-down" class="sort-icon" style="width: 14px; height: 14px;"></i>
                                </th>
                                <th onclick="App.handleSort && App.handleSort('date')">
                                    Data
                                    <i data-lucide="arrow-up-down" class="sort-icon" style="width: 14px; height: 14px;"></i>
                                </th>
                                <th>Descri√ß√£o</th>
                                <th>A√ß√µes</th>
                            </tr>
                        </thead>
                        <tbody id="tableBody"></tbody>
                    </table>
                </div>
            </div>
        </div>

        <div id="timelineView" class="content-view" role="tabpanel">
            <div class="timeline-container">
                <div class="timeline" id="timeline"></div>
            </div>
        </div>

        <div id="calendarView" class="content-view" role="tabpanel">
            <div class="calendar-container">
                <div id="calendar"></div>
            </div>
        </div>

        <div id="chartsView" class="content-view" role="tabpanel">
            <div class="charts-container">
                <div class="chart-card" data-aos="fade-up">
                    <div class="chart-header">
                        <h3 class="chart-title">
                            <i data-lucide="trending-up" style="width: 20px; height: 20px; color: var(--color-primary);"></i>
                            Updates ao Longo do Tempo
                        </h3>
                    </div>
                    <div class="chart-wrapper">
                        <canvas id="timelineChart"></canvas>
                    </div>
                </div>
                <div class="chart-card" data-aos="fade-up" data-aos-delay="100">
                    <div class="chart-header">
                        <h3 class="chart-title">
                            <i data-lucide="pie-chart" style="width: 20px; height: 20px; color: var(--color-primary);"></i>
                            Distribui√ß√£o por Ferramenta
                        </h3>
                    </div>
                    <div class="chart-wrapper">
                        <canvas id="toolsChart"></canvas>
                    </div>
                </div>
                <div class="chart-card" data-aos="fade-up" data-aos-delay="200">
                    <div class="chart-header">
                        <h3 class="chart-title">
                            <i data-lucide="activity" style="width: 20px; height: 20px; color: var(--color-primary);"></i>
                            Atividade por Dia da Semana
                        </h3>
                    </div>
                    <div class="chart-wrapper">
                        <canvas id="activityChart"></canvas>
                    </div>
                </div>
            </div>
        </div>

        <!-- Pagination -->
        <nav class="pagination-container" id="paginationContainer" aria-label="Pagina√ß√£o">
            <div class="pagination-info" id="paginationInfo"></div>
            <div class="pagination" id="pagination" role="navigation"></div>
        </nav>

        <!-- API Documentation -->
        <section class="api-docs" id="apiDocs" data-aos="fade-up">
            <div class="api-docs-header">
                <div class="api-docs-icon">
                    <i data-lucide="code-2" style="width: 24px; height: 24px;"></i>
                </div>
                <div class="api-docs-title">
                    <h2>API Documentation</h2>
                    <p>Integre os dados de updates em suas aplica√ß√µes</p>
                </div>
                <span class="api-badge">
                    <i data-lucide="zap" style="width: 12px; height: 12px;"></i>
                    REST API
                </span>
            </div>

            <div class="api-base-url">
                <div class="api-base-url-icon">
                    <i data-lucide="globe" style="width: 20px; height: 20px;"></i>
                </div>
                <div class="api-base-url-content">
                    <div class="api-base-url-label">Base URL</div>
                    <code id="apiBaseUrl">https://afrikacrawlerapi.vercel.app/api</code>
                </div>
                <button class="api-copy-btn" onclick="App.copyApiUrl()">
                    <i data-lucide="copy" style="width: 14px; height: 14px;"></i>
                    Copiar
                </button>
            </div>

            <div class="api-endpoints">
                <!-- GET /updates -->
                <article class="api-endpoint" id="endpoint-updates">
                    <div class="api-endpoint-header" onclick="App.toggleEndpoint('endpoint-updates')">
                        <span class="api-method get">GET</span>
                        <span class="api-path">/updates</span>
                        <span class="api-desc">Lista todos os updates das ferramentas</span>
                        <span class="api-endpoint-toggle">
                            <i data-lucide="chevron-down" style="width: 18px; height: 18px;"></i>
                        </span>
                    </div>
                    <div class="api-endpoint-body">
                        <div class="api-section">
                            <div class="api-section-title">Query Parameters</div>
                            <div class="api-params">
                                <div class="api-param">
                                    <span class="api-param-name">tool</span>
                                    <span class="api-param-type">string</span>
                                    <span class="api-param-desc">Filtrar por ferramenta (ex: Veracode)</span>
                                </div>
                                <div class="api-param">
                                    <span class="api-param-name">limit</span>
                                    <span class="api-param-type">number</span>
                                    <span class="api-param-desc">Limite de resultados (padr√£o: 20)</span>
                                </div>
                            </div>
                        </div>

                        <div class="api-section">
                            <div class="api-section-title">Exemplo de Resposta</div>
                            <div class="api-code-block">
                                <div class="api-code-header">
                                    <span class="api-code-lang">JSON</span>
                                </div>
                                <div class="api-code-content">
<code>[{
  <span class="key">"tool"</span>: <span class="string">"Veracode"</span>,
  <span class="key">"version"</span>: <span class="string">"CLI v3.5.0"</span>,
  <span class="key">"date"</span>: <span class="string">"2026-01-28T12:00:00.000Z"</span>,
  <span class="key">"description"</span>: <span class="string">"New features..."</span>,
  <span class="key">"link"</span>: <span class="string">"https://docs.veracode.com/..."</span>
}]</code>
                                </div>
                            </div>
                        </div>

                        <button class="api-try-btn" onclick="App.tryApiEndpoint('/updates?limit=5')">
                            <i data-lucide="play" style="width: 14px; height: 14px;"></i>
                            Testar no navegador
                        </button>
                    </div>
                </article>

                <!-- GET / -->
                <article class="api-endpoint" id="endpoint-health">
                    <div class="api-endpoint-header" onclick="App.toggleEndpoint('endpoint-health')">
                        <span class="api-method get">GET</span>
                        <span class="api-path">/</span>
                        <span class="api-desc">Health check da API</span>
                        <span class="api-endpoint-toggle">
                            <i data-lucide="chevron-down" style="width: 18px; height: 18px;"></i>
                        </span>
                    </div>
                    <div class="api-endpoint-body">
                        <div class="api-section">
                            <div class="api-section-title">Exemplo de Resposta</div>
                            <div class="api-code-block">
                                <div class="api-code-header">
                                    <span class="api-code-lang">JSON</span>
                                </div>
                                <div class="api-code-content">
<code>{
  <span class="key">"status"</span>: <span class="string">"ok"</span>,
  <span class="key">"message"</span>: <span class="string">"Afrika Crawler API is running üöÄ"</span>
}</code>
                                </div>
                            </div>
                        </div>

                        <button class="api-try-btn" onclick="App.tryApiEndpoint('/')">
                            <i data-lucide="play" style="width: 14px; height: 14px;"></i>
                            Testar no navegador
                        </button>
                    </div>
                </article>
            </div>
        </section>
    </main>

    <!-- ===== Footer ===== -->
    <footer style="text-align: center; padding: 2rem; color: var(--text-muted); font-size: 0.875rem;">
        <p>
            <i data-lucide="shield-check" style="width: 16px; height: 16px; vertical-align: middle;"></i>
            Afrika Crawler &copy; 2026 ‚Äî Monitorando updates de seguran√ßa
        </p>
    </footer>

    <!-- ===== Loading Overlay ===== -->
    <div class="loading-overlay" id="loadingOverlay" aria-hidden="true">
        <div class="loading-spinner">
            <div class="spinner-dots">
                <span></span>
                <span></span>
                <span></span>
            </div>
            <span style="color: var(--text-secondary); font-size: 0.9375rem; font-weight: 500;">
                Carregando updates...
            </span>
        </div>
    </div>

    <!-- ===== Detail Modal ===== -->
    <div class="modal-overlay" id="detailModal" role="dialog" aria-modal="true" aria-labelledby="modalTitle">
        <div class="modal">
            <div class="modal-header">
                <h2 class="modal-title" id="modalTitle">
                    <i data-lucide="info" style="width: 20px; height: 20px; color: var(--color-primary);"></i>
                    Detalhes do Update
                </h2>
                <button class="modal-close" onclick="App.closeModal()" aria-label="Fechar modal">
                    <i data-lucide="x" style="width: 20px; height: 20px;"></i>
                </button>
            </div>
            <div class="modal-body" id="modalBody"></div>
        </div>
    </div>

    <!-- ===== Toast Container ===== -->
    <div class="toast-container" aria-live="polite"></div>

    <!-- ===== Scripts ===== -->
    <script src="js/utils.js"></script>
    <script src="js/toast.js"></script>
    <script src="js/theme.js"></script>
    <script src="js/components.js"></script>
    <script src="js/charts.js"></script>
    <script src="js/app.js"></script>
    
    <!-- Initialize AOS -->
    <script>
        AOS.init({
            duration: 600,
            easing: 'ease-out-cubic',
            once: true,
            offset: 50
        });
    </script>
</body>
</html>
